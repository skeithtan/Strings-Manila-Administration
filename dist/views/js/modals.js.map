{"version":3,"sources":["../../../views/js/modals.js"],"names":["refreshStalls","refreshProducts","refreshStockInventory","$","click","onAddStallButtonClick","onRenameStallButtonClick","onDeleteStallButtonClick","on","val","setUpAddProductModal","onAddSingularProductButtonClick","onAddTieredProductButtonClick","onModifySingularProductButtonClick","onModifyTieredProductButtonClick","onDeleteProductButtonClick","modal","find","each","index","input","textarea","tierRow","remove","onRestockButtonClick","stallName","ajax","url","baseURL","type","data","name","beforeSend","authorizeXHR","success","iziToast","title","message","error","console","log","response","stallNameInput","stallID","method","id","fillOutRenameStallModal","activeStall","attr","fillOutDeleteStallModal","html","hide","show","clone","removeAttr","appendTo","deleteButton","recalculateValidator","inputs","item","off","addValidation","button","displayUploadingToast","randomString","info","timeout","hideUploadingToast","document","getElementById","submitAddProduct","product","image","submit","JSON","stringify","contentType","responseText","uploadImage","link","submitModifyProduct","productID","form","FormData","append","uploadToastID","post","async","processData","warning","xhr","setRequestHeader","imageInput","files","description","tiers","price","length","tier","value","push","fillOutSingularProductModal","currentPrice","fillOutTieredProductModal","forEach","parseFloat","fillOutModifyProductModal","isSingular","fillOutAddProductModal","fillOutDeleteProductModal","tierID","quantity","isAdd","is","add","fillOutRestockModal","productDescription","localStorage","token","replace","c","crypto","getRandomValues","Uint8Array","toString"],"mappings":"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","file":"modals.js","sourcesContent":["var refreshStalls;\nvar refreshProducts;\n\nvar refreshStockInventory;\n\n\n$(() => {\n    //MARK: - Entity Management\n    //Stalls\n    $('#add-stall-button').click(onAddStallButtonClick);\n    $('#rename-stall-button').click(onRenameStallButtonClick);\n    $('#delete-stall-button').click(onDeleteStallButtonClick);\n    $('#add-stall-modal').on('hidden.bs.modal', () => {\n        $('#add-stall-name-input').val('');\n    });\n\n    //Products\n    setUpAddProductModal();\n    $('#add-singular-product-button').click(onAddSingularProductButtonClick);\n    $('#add-tiered-product-button').click(onAddTieredProductButtonClick);\n    $('#modify-singular-product-button').click(onModifySingularProductButtonClick);\n    $('#modify-tiered-product-button').click(onModifyTieredProductButtonClick);\n    $('#delete-product-button').click(onDeleteProductButtonClick);\n    $('#add-product-modal').on('hidden.bs.modal', () => {\n        const modal = $('#add-product-modal');\n        modal.find('input').each((index, input) => {\n            $(input).val('');\n        });\n\n        modal.find('textarea').each((index, textarea) => {\n            $(textarea).val('');\n        });\n\n        modal.find('.extra-tier-row').each((index, tierRow) => {\n            $(tierRow).remove();\n        });\n    });\n    $('#modify-product-modal').on('hidden.bs.modal', () => {\n        const modal = $('#add-product-modal');\n        modal.find('input').each((index, input) => {\n            $(input).val('');\n        });\n\n        modal.find('textarea').each((index, textarea) => {\n            $(textarea).val('');\n        });\n\n        modal.find('.extra-tier-row').each((index, tierRow) => {\n            $(tierRow).remove();\n        });\n    });\n\n    //Restock\n    $('#restock-button').click(onRestockButtonClick);\n});\n\n//MARK: - Stalls\nfunction onAddStallButtonClick() {\n    const stallName = $('#add-stall-name-input').val();\n\n    $.ajax({\n        url: baseURL + 'stalls/',\n        type: 'POST',\n        data: {\n            name: stallName\n        },\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Added',\n                message: 'Successfully added stall.'\n            });\n\n            refreshStalls();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                message: 'Unable to add stall.'\n            })\n        },\n    });\n\n}\n\nfunction onRenameStallButtonClick() {\n    const stallNameInput = $('#rename-stall-name-input');\n    const stallName = stallNameInput.val();\n    const stallID = $('#rename-stall-id').val();\n    stallNameInput.val('');\n\n    $.ajax({\n        url: `${baseURL}stalls/${stallID}/`,\n        method: 'PUT',\n        data: {\n            name: stallName\n        },\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Renamed',\n                message: 'Successfully renamed stall.'\n            });\n\n            refreshStalls();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                id: 'uploading-image-toast',\n                message: 'Unable to rename stall.'\n            })\n        },\n    });\n}\n\nfunction onDeleteStallButtonClick() {\n    const stallID = $('#delete-stall-id').val();\n    $.ajax({\n        url: `${baseURL}stalls/${stallID}/`,\n        method: 'DELETE',\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Discontinued',\n                message: 'Stall is now discontinued.'\n            });\n            refreshStalls();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                message: 'Could not discontinue stall.'\n            })\n        },\n    })\n}\n\n//Fill outs\n\nfunction fillOutRenameStallModal(activeStall) {\n    $('#rename-stall-id').val(activeStall.id);\n    $('#rename-stall-name-input').val(activeStall.name);\n    $('#rename-stall-button').attr('disabled', false); //Form is already filled out, do not disable submit button\n}\n\nfunction fillOutDeleteStallModal(activeStall) {\n    $('#delete-stall-id').val(activeStall.id);\n    $('span.delete-stall-name').html(activeStall.name);\n}\n\n\n//MARK: - Products\nfunction setUpAddProductModal() {\n    $('#add-tiered-product-card').hide();\n\n    $('#add-singular-product-tab').click(() => {\n        $('#add-tiered-product-card').hide();\n        $('#add-singular-product-card').show();\n    });\n\n    $('#add-tiered-product-tab').click(() => {\n        $('#add-singular-product-card').hide();\n        $('#add-tiered-product-card').show();\n    });\n\n    $('#add-tier-button').click(() => {\n        const clone = $('#tier-row-clone').clone();\n        clone.removeAttr('id');\n        clone.appendTo($('#tiers-set'));\n\n        $('#add-tiered-product-button').attr('disabled', true);\n\n        const deleteButton = $(clone.find('.tier-row-remove')[0]);\n        deleteButton.click(() => {\n            clone.remove();\n            recalculateValidator();\n        });\n\n        recalculateValidator();\n    });\n\n    function recalculateValidator() {\n        const inputs = $('#add-tiered-product-card').find('.text-input');\n\n        //Remove old validator\n        inputs.each((index, item) => {\n            $(item).off('input');\n        });\n\n        addValidation({\n            inputs: inputs,\n            button: $('#add-tiered-product-button')\n        });\n    }\n\n}\n\nfunction displayUploadingToast() {\n    const id = randomString();\n    iziToast.info({\n        title: 'Uploading image...',\n        id: id,\n        timeout: false\n    });\n\n    return id;\n}\n\nfunction hideUploadingToast(id) {\n    iziToast.hide({}, document.getElementById(id));\n}\n\nfunction submitAddProduct(product, stallID, image) {\n    function submit(product) {\n        $.ajax({\n            url: `${baseURL}stalls/${stallID}/products/`,\n            method: 'POST',\n            data: JSON.stringify(product),\n            contentType: 'application/json; charset=utf-8',\n            beforeSend: authorizeXHR,\n            success: () => {\n                iziToast.success({\n                    title: 'Added',\n                    message: 'Successfully added product'\n                });\n                refreshProducts();\n            },\n            error: response => {\n                console.log(response.responseText);\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Unable to add product'\n                })\n            }\n        });\n    }\n\n    if (image !== null) {\n        uploadImage({\n            image: image,\n            success: response => {\n                product.image = response.data.link;\n                submit(product)\n            },\n            error: response => {\n                console.log(response);\n                submit(product);\n            }\n        })\n    } else {\n        submit(product);\n    }\n}\n\nfunction submitModifyProduct(product, productID, image) {\n    function submit(product) {\n        $.ajax({\n            url: `${baseURL}products/${productID}/`,\n            method: 'PATCH',\n            data: JSON.stringify(product),\n            contentType: 'application/json; charset=utf-8',\n            beforeSend: authorizeXHR,\n            success: () => {\n                iziToast.success({\n                    title: 'Modified',\n                    message: 'Successfully modified product'\n                });\n                refreshProducts();\n            },\n            error: response => {\n                console.log(response.responseText);\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Unable to modify product'\n                });\n            }\n        })\n    }\n\n    if (image !== null) {\n        uploadImage({\n            image: image,\n            success: response => {\n                product.image = response.data.link;\n                submit(product);\n            },\n            error: response => {\n                console.log(response);\n                submit(product);\n            }\n        })\n    } else {\n        submit(product)\n    }\n}\n\nfunction uploadImage(data) {\n    const image = data.image;\n    const form = new FormData();\n    form.append('image', image);\n\n    const uploadToastID = displayUploadingToast();\n    $.post({\n        url: 'https://api.imgur.com/3/image',\n        async: true,\n        data: form,\n        contentType: false,\n        processData: false,\n        success: response => {\n            hideUploadingToast(uploadToastID);\n            iziToast.success({\n                title: 'Uploaded',\n                message: 'Image has been uploaded.'\n            });\n            data.success(response);\n        },\n        error: response => {\n            hideUploadingToast(uploadToastID);\n            iziToast.warning({\n                title: 'Error',\n                message: 'Unable to upload photo. Using default photo instead.'\n            });\n            data.error(response);\n        },\n        beforeSend: xhr => {\n            xhr.setRequestHeader('Authorization', 'Client-ID 715b55f24db9cd2')\n        }\n    });\n\n}\n\nfunction onAddSingularProductButtonClick() {\n    const name = $('#add-singular-product-name-input').val();\n    const imageInput = $('#add-singular-product-image-input')[0].files;\n    const stallID = $('#add-product-stall-id').val();\n\n    let product = {\n        name: name,\n        description: $('#add-singular-product-description-input').val(),\n        tiers: [{\n            name: name,\n            price: $('#add-singular-product-price-input').val(),\n        }]\n    };\n\n    if (imageInput.length) {\n        const image = imageInput[0];\n        submitAddProduct(product, stallID, image);\n    } else {\n        submitAddProduct(product, stallID, null);\n    }\n}\n\nfunction onAddTieredProductButtonClick() {\n    let product = {\n        name: $('#add-tiered-product-name-input').val(),\n        description: $('#add-tiered-product-description-input').val(),\n        tiers: []\n    };\n\n    const imageInput = $('#add-singular-product-image-input')[0].files;\n    const stallID = $('#add-product-stall-id').val();\n\n    $('#tiers-set').find('.tier-row').each((index, item) => {\n        const tierRow = $(item);\n        const tier = {\n            name: tierRow.find('.tier-name')[0].value,\n            price: tierRow.find('.tier-price')[0].value\n        };\n\n        product.tiers.push(tier);\n    });\n\n    if (imageInput.length) {\n        const image = imageInput[0];\n        submitAddProduct(product, stallID, image);\n    } else {\n        submitAddProduct(product, stallID, null);\n    }\n}\n\nfunction onModifySingularProductButtonClick() {\n    const imageInput = $('#modify-singular-product-image-input')[0].files;\n    const productID = $('#modify-product-id').val();\n    const name = $('#modify-singular-product-name-input').val();\n\n    let product = {\n        name: name,\n        description: $('#modify-singular-product-description-input').val(),\n        tiers: [{\n            id: $('#modify-singular-product-tier-id').val(),\n            name: name,\n            price: $('#modify-singular-product-price-input').val(),\n        }]\n    };\n\n    if (imageInput.length) {\n        const image = imageInput[0];\n        submitModifyProduct(product, productID, image);\n    } else {\n        submitModifyProduct(product, productID, null);\n    }\n}\n\nfunction onModifyTieredProductButtonClick() {\n    const imageInput = $('#modify-tiered-product-image-input')[0].files;\n    const productID = $('#modify-product-id').val();\n\n    let product = {\n        name: $('#modify-tiered-product-name-input').val(),\n        description: $('#modify-tiered-product-description-input').val(),\n        tiers: []\n    };\n\n    $('#modify-tiers-set').find('.modify-tier-row').each((index, item) => {\n        const tierRow = $(item);\n        const tier = {\n            id: tierRow.find('.tier-row-id')[0].value,\n            name: tierRow.find('.tier-name')[0].value,\n            price: tierRow.find('.tier-price')[0].value\n        };\n\n        product.tiers.push(tier);\n    });\n\n    if (imageInput.length) {\n        const image = imageInput[0];\n        submitModifyProduct(product, productID, image);\n    } else {\n        submitModifyProduct(product, productID, null);\n    }\n}\n\nfunction onDeleteProductButtonClick() {\n    const productID = $('#delete-product-id').val();\n    $.ajax({\n        url: `${baseURL}products/${productID}/`,\n        method: 'DELETE',\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Discontinued',\n                message: 'Product is now discontinued.'\n            });\n            refreshProducts();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                message: 'Could not discontinue product.'\n            })\n        }\n    })\n}\n\n//Fill Outs\nfunction fillOutSingularProductModal(product) {\n    $('#modify-singular-product-body').show();\n    $('#modify-tiered-product-body').hide();\n\n    $('#modify-singular-product-tier-id').val(product.tiers[0].id);\n    $('#modify-singular-product-name-input').val(product.name);\n    $('#modify-singular-product-price-input').val(product.tiers[0].currentPrice);\n    $('#modify-singular-product-description-input').val(product.description);\n\n    $('#modify-singular-product-button').attr('disabled', false); //Form is filled out - no need to disable button\n}\n\nfunction fillOutTieredProductModal(product) {\n\n    function recalculateValidator() {\n        const inputs = $('#modify-tiered-product-body').find('.text-input');\n\n        //Remove old validator\n        inputs.each((index, item) => {\n            $(item).off('input');\n        });\n\n        addValidation({\n            inputs: inputs,\n            button: $('#modify-tiered-product-button')\n        });\n    }\n\n    $('#modify-singular-product-body').hide();\n    $('#modify-tiered-product-body').show();\n\n    $('#modify-tiered-product-name-input').val(product.name);\n    $('#modify-tiered-product-description-input').val(product.description);\n\n    $('#modify-tiers-set').html('');\n\n    product.tiers.forEach(tier => {\n        const clone = $('#modify-tier-row-clone').clone();\n        clone.removeAttr('id');\n\n        $(clone.find('.tier-row-id')[0]).val(tier.id);\n        $(clone.find('.tier-name')[0]).val(tier.name);\n        $(clone.find('.tier-price')[0]).val(parseFloat(tier.currentPrice));\n\n        $('#modify-tiers-set').append(clone);\n    });\n\n    recalculateValidator();\n}\n\nfunction fillOutModifyProductModal(product) {\n    $('#modify-product-id').val(product.id);\n    const isSingular = product.tiers.length === 1;\n\n    if (isSingular) {\n        fillOutSingularProductModal(product);\n    } else {\n        fillOutTieredProductModal(product);\n    }\n}\n\nfunction fillOutAddProductModal(activeStall) {\n    $('#add-product-stall-id').val(activeStall.id);\n}\n\nfunction fillOutDeleteProductModal(product) {\n    $('#delete-product-id').val(product.id);\n    $('span.delete-product-name').html(product.name);\n}\n\n\n//MARK: - Stock Inventory\nfunction onRestockButtonClick() {\n    const tierID = $('#restock-tier-id').val();\n    const quantity = $('#restock-quantity').val();\n    const isAdd = $('#restock-add').is(':checked');\n\n    $.ajax({\n        url: `${baseURL}product-tiers/${tierID}/restock/`,\n        method: 'POST',\n        data: {\n            quantity: quantity,\n            add: isAdd\n        },\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Restocked',\n                message: 'Successfully restocked product'\n            });\n            refreshStockInventory();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                message: 'Unable to restock product'\n            });\n        }\n    })\n}\n\n//Fill Out\nfunction fillOutRestockModal(tier) {\n    $('#restock-tier-id').val(tier.id);\n    $('#restock-modal-product-name').html(tier.productDescription.name);\n    $('#restock-modal-product-quantity').html(tier.quantity);\n\n    if (tier.isSingular) {\n        $(\"#restock-modal-tier-row\").hide();\n    } else {\n        $(\"#restock-modal-tier-row\").show();\n        $(\"#restock-modal-tier-name\").html(tier.name);\n    }\n\n    if (tier.quantity === 0) {\n        $('#restock-button-group').hide();\n        $('#restock-dummy-button-group').show();\n    } else {\n        $('#restock-button-group').show();\n        $('#restock-dummy-button-group').hide();\n    }\n}\n\n//MARK: - XHR Authorization\nfunction authorizeXHR(xhr) {\n    xhr.setRequestHeader(\"Authorization\", \"Token \" + localStorage.token)\n}\n\n//MARK: - Random String Generator\nfunction randomString() {\n    // Random string with very little collision possibility\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    )\n}\n"]}