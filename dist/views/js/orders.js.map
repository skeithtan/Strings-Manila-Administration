{"version":3,"sources":["../../../views/js/orders.js"],"names":["fetchOrders","object","get","url","baseURL","beforeSend","authorizeXHR","data","startDate","endDate","success","completionHandler","error","console","log","response","fetchOrder","id","xhr","setRequestHeader","localStorage","token","Orders","props","state","orders","statusFilter","refreshState","bind","showSuccessAlert","setState","result","iziToast","title","message","timeout","progressBar","loadingState","filteredOrders","Component","OrderHead","OrderTable","rows","map","order","OrderRow","status","orderStatus","total_price","date_ordered"],"mappings":"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","file":"orders.js","sourcesContent":["import React from 'react';\nimport $ from 'jquery';\n\n// Fetch data\nfunction fetchOrders(object) {\n    $.get({\n        url: `${baseURL}/api/orders/`,\n        beforeSend: authorizeXHR,\n        data: {\n            \"start-date\": object.startDate,\n            \"end-date\": object.endDate\n        },\n        success: object.completionHandler,\n        error: response => console.log(response)\n    });\n}\n\nfunction fetchOrder(id, completionHandler) {\n    $.get({\n        url: `${baseURL}/api/orders/${id}/`,\n        beforeSend: authorizeXHR,\n        success: completionHandler,\n        error: response => console.log(response)\n    });\n}\n\nfunction authorizeXHR(xhr) {\n    xhr.setRequestHeader(\"Authorization\", `Token ${localStorage.token}`);\n}\n\n// React\nclass Orders extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            orders: null,\n            statusFilter: null,\n        };\n\n        this.refreshState = this.refreshState.bind(this);\n        this.refreshState();\n    }\n\n    refreshState(showSuccessAlert = false) {\n        fetchOrders({\n            startDate: \"2017-08-23\",\n            endDate: \"2017-08-30\",\n            completionHandler: result => {\n                //TODO: Sort by date\n\n                this.setState({\n                    orders: result\n                });\n\n                if (showSuccessAlert) {\n                    iziToast.success({\n                        title: \"Refreshed\",\n                        message: \"Data is up to date.\",\n                        timeout: 1500,\n                        progressBar: false\n                    })\n                }\n            }\n        })\n    }\n\n    static loadingState() {\n        return (\n            <div className=\"container-fluid d-flex flex-column justify-content-center align-items-center h-100\">\n                <h3>Loading...</h3>\n            </div>\n        );\n    }\n\n    render() {\n        if (this.state.orders === null) {\n            return Orders.loadingState();\n        }\n\n        //TODO: Filter\n        const filteredOrders = this.state.orders;\n\n        return (\n            <div id=\"orders\"\n                 className=\"container-fluid m-0 p-0 h-100 w-100 d-flex flex-column\">\n                <OrderHead/>\n                <OrderTable orders={filteredOrders}/>\n            </div>\n        );\n    }\n\n}\n\nclass OrderHead extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"container-fluid row ml-auto mr-auto bg-light page-head\">\n                <div className=\"mr-auto row pt-5 pl-3 pr-3\">\n                    <h4 className=\"mr-3\">Orders</h4>\n                    <div>\n                        <button className=\"btn btn-sm btn-outline-primary mr-1\">Refresh Data</button>\n                        <button className=\"btn btn-sm btn-outline-primary\">Generate Report</button>\n                    </div>\n                </div>\n\n                <div className=\"row pt-3 pl-3 mr-3\">\n                    <div className=\"mb-2 mb-sm-0\">\n                        <small className=\"text-muted mt-auto mb-2 mr-3 d-block\">Status filter</small>\n                        <div className=\"btn-group\"\n                             data-toggle=\"buttons\">\n                            <label className=\"btn btn-outline-secondary active\">\n                                <input type=\"radio\"\n                                       autoComplete=\"off\"/>All\n                            </label>\n                            <label className=\"btn btn-outline-secondary\">\n                                <input type=\"radio\"\n                                       autoComplete=\"off\"/>Unpaid\n                            </label>\n                            <label className=\"btn btn-outline-secondary\">\n                                <input type=\"radio\"\n                                       autoComplete=\"off\"/>Verifying Payment\n                            </label>\n                            <label className=\"btn btn-outline-secondary\">\n                                <input type=\"radio\"\n                                       autoComplete=\"off\"/>Processing\n                            </label>\n                            <label className=\"btn btn-outline-secondary\">\n                                <input type=\"radio\"\n                                       autoComplete=\"off\"/>Shipped\n                            </label>\n                            <label className=\"btn btn-outline-secondary\">\n                                <input type=\"radio\"\n                                       name=\"options\"\n                                       autoComplete=\"off\"/>Cancelled\n                            </label>\n                        </div>\n                    </div>\n                    <div className=\"row mb-2 ml-2\">\n                        <div className=\"mr-2\">\n                            <small className=\"text-muted mt-auto mb-2 mr-3 d-block\">Start Date</small>\n                            <div className=\"input-group\">\n                                <input className=\"form-control\"\n                                       type=\"date\"\n                                       placeholder=\"Start Date\"/>\n                            </div>\n                        </div>\n                        <div className=\"mr-2\">\n                            <small className=\"text-muted mt-auto mb-2 mr-3 d-block\">End Date</small>\n                            <div className=\"input-group mb-2 mb-sm-0\">\n\n                                <div className=\"input-group\">\n                                    <input className=\"form-control\"\n                                           type=\"date\"\n                                           placeholder=\"End Date\"/>\n                                </div>\n                            </div>\n                        </div>\n                        <button className=\"btn btn-primary mt-auto\">Filter</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass OrderTable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.rows = this.rows.bind(this);\n    }\n\n    static emptyState() {\n        return (\n            <div>\n                <h1>TODO</h1>\n            </div>\n        )\n    }\n\n    rows() {\n        return this.props.orders.map(order => <OrderRow key={order.id}\n                                                        order={order}/>)\n    }\n\n    render() {\n\n        return (\n            <div className=\"d-flex flex-column page-content\">\n                <table className=\"table table-hover page-table d-flex flex-column mb-0\">\n                    <thead className=\"thead-default\">\n                    <tr>\n                        <th>Order Number</th>\n                        <th>Order Total</th>\n                        <th>Order Date</th>\n                        <th>Status</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {this.rows()}\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}\n\nclass OrderRow extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    static orderStatus(status) {\n        switch (status) {\n            case 'U':\n                return 'Unpaid';\n            case 'V':\n                return 'Verifying Payment';\n            case 'P':\n                return 'Processing';\n            case 'S':\n                return 'Shipped';\n            case 'C':\n                return 'Cancelled';\n        }\n\n        return status;\n    }\n\n    render() {\n        const status = OrderRow.orderStatus(this.props.order.status);\n\n        return (\n            <tr>\n                <td>{this.props.order.id}</td>\n                <td>{this.props.order.total_price}</td>\n                <td>{this.props.order.date_ordered}</td>\n                <td>{status}</td>\n            </tr>\n        );\n    }\n}\n\nexport default Orders;"]}