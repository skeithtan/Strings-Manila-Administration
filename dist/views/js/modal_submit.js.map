{"version":3,"sources":["../../../views/js/modal_submit.js"],"names":["$","click","stallNameInput","stallName","val","ajax","url","baseURL","type","data","name","success","console","log","error","response","beforeSend","authorizeXHR","stallID","method","nameInput","priceInput","descriptionInput","imageInput","files","product","stall","price","description","image_link","undefined","length","image","form","FormData","append","async","link","imageURL","submitAddProduct","alert","xhr","setHeader","setRequestHeader","localStorage","token"],"mappings":"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","file":"modal_submit.js","sourcesContent":["$(() => {\n\n    //MARK: - Entity Management\n    $('#add-stall-button').click(() => {\n        const stallNameInput = $('#add-stall-name-input');\n        const stallName = stallNameInput.val();\n        stallNameInput.val('');\n\n        $.ajax({\n            url: baseURL + 'stalls/',\n            type: 'POST',\n            data: {\n                name: stallName\n            },\n            success: () => {\n                console.log(\"Success\");\n                //TODO\n            },\n            error: response => {\n                console.log(response);\n            },\n            beforeSend: authorizeXHR\n        });\n\n    });\n\n    $('#rename-stall-button').click(() => {\n        const stallNameInput = $('#rename-stall-name-input');\n        const stallName = stallNameInput.val();\n        const stallID = $('#rename-stall-id').val();\n        stallNameInput.val('');\n\n        $.ajax({\n            url: baseURL + 'stalls/' + stallID + '/',\n            method: 'PUT',\n            data: {\n                name: stallName\n            },\n            success: response => {\n                console.log(response)\n            },\n            error: response => {\n                console.log(response);\n            },\n            beforeSend: authorizeXHR\n        });\n    });\n\n    $('#delete-stall-button').click(() => {\n        const stallID = $('#delete-stall-id').val();\n\n        $.ajax({\n            url: baseURL + 'stalls/' + stallID + '/',\n            method: 'DELETE',\n            success: response => {\n                console.log(response);\n            },\n            error: response => {\n                console.log(response);\n            },\n            beforeSend: authorizeXHR\n        })\n    });\n\n    $('#add-product-button').click(() => {\n        const nameInput = $('#add-product-name-input');\n        const priceInput = $('#add-product-price-input');\n        const descriptionInput = $('#add-product-description-input');\n        const imageInput = $('#add-product-image-input')[0].files;\n        const stallID = $('#add-product-stall-id');\n\n        let product = {\n            stall: stallID,\n            name: nameInput.val(),\n            price: priceInput.val(),\n            description: descriptionInput.val(),\n            image_link: undefined\n        };\n\n        if (imageInput.length) {\n            const image = imageInput[0];\n            const form = new FormData();\n            form.append('image', image);\n\n            $.ajax({\n                url: 'https://api.imgur.com/3/image',\n                type: 'POST',\n                async: true,\n                data: form,\n                success: response => {\n                    const link = response.data.link;\n                    product.imageURL = link;\n                    submitAddProduct(product)\n                },\n                error: () => {\n                    alert(\"An error occurred uploading the photo.\");\n                    submitAddProduct(product);\n                },\n                beforeSend: xhr => {\n                    xhr.setHeader('Authorization', 'Client-ID 715b55f24db9cd2')\n                }\n            });\n        } else {\n            submitAddProduct(product);\n        }\n\n        nameInput.val('');\n        priceInput.val('');\n        descriptionInput.val('');\n        imageInput.val('');\n    });\n\n});\n\nfunction submitAddProduct(product) {\n    //TODO\n    $.ajax({});\n}\n\nfunction authorizeXHR(xhr) {\n    xhr.setRequestHeader(\"Authorization\", \"Token \" + localStorage.token)\n}"]}