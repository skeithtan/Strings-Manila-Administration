{"version":3,"sources":["../../../views/js/modal_submit.js"],"names":["refreshStalls","refreshProducts","refreshStockInventory","$","click","onAddStallButtonClick","onRenameStallButtonClick","onDeleteStallButtonClick","on","val","setUpAddProductModal","onAddSingularProductButtonClick","onModifyProductButtonClick","onDeleteProductButtonClick","onRestockButtonClick","stallName","ajax","url","baseURL","type","data","name","beforeSend","authorizeXHR","success","iziToast","title","message","error","console","log","response","stallNameInput","stallID","method","id","hide","show","clone","removeAttr","appendTo","attr","deleteButton","find","remove","recalculateValidator","inputs","each","index","item","off","addValidation","button","displayUploadingToast","randomString","info","timeout","hideUploadingToast","document","getElementById","submitAddProduct","product","responseText","submitModifyProduct","productID","uploadImage","image","form","FormData","append","uploadToastID","post","async","contentType","processData","warning","xhr","setRequestHeader","imageInput","files","description","tiers","price","length","link","quantity","isAdd","is","add","localStorage","token","replace","c","crypto","getRandomValues","Uint8Array","toString"],"mappings":"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","file":"modal_submit.js","sourcesContent":["var refreshStalls;\nvar refreshProducts;\n\nvar refreshStockInventory;\n\n\n$(() => {\n    //MARK: - Entity Management\n    //Stalls\n    $('#add-stall-button').click(onAddStallButtonClick);\n    $('#rename-stall-button').click(onRenameStallButtonClick);\n    $('#delete-stall-button').click(onDeleteStallButtonClick);\n    $('#add-stall-modal').on('hidden.bs.modal', () => {\n        $('#add-stall-name-input').val('');\n    });\n\n    //Products\n    setUpAddProductModal();\n    $('#add-singular-product-button').click(onAddSingularProductButtonClick);     //FIXME: this\n    $('#modify-product-button').click(onModifyProductButtonClick);\n    $('#delete-product-button').click(onDeleteProductButtonClick);\n    $('#add-product-modal').on('hidden.bs.modal', () => {\n        $('#add-product-name-input').val('');\n        $('#add-product-price-input').val('');\n        $('#add-product-description-input').val('');\n        $('#add-product-image-input').val('');\n    }); //FIXME: this\n\n\n    //Restock\n    $('#restock-button').click(onRestockButtonClick);\n});\n\n//MARK: - Stalls\nfunction onAddStallButtonClick() {\n    const stallName = $('#add-stall-name-input').val();\n\n    $.ajax({\n        url: baseURL + 'stalls/',\n        type: 'POST',\n        data: {\n            name: stallName\n        },\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Added',\n                message: 'Successfully added stall.'\n            });\n\n            refreshStalls();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                message: 'Unable to add stall.'\n            })\n        },\n    });\n\n}\n\nfunction onRenameStallButtonClick() {\n    const stallNameInput = $('#rename-stall-name-input');\n    const stallName = stallNameInput.val();\n    const stallID = $('#rename-stall-id').val();\n    stallNameInput.val('');\n\n    $.ajax({\n        url: `${baseURL}stalls/${stallID}/`,\n        method: 'PUT',\n        data: {\n            name: stallName\n        },\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Renamed',\n                message: 'Successfully renamed stall.'\n            });\n\n            refreshStalls();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                id: 'uploading-image-toast',\n                message: 'Unable to rename stall.'\n            })\n        },\n    });\n}\n\nfunction onDeleteStallButtonClick() {\n    const stallID = $('#delete-stall-id').val();\n    $.ajax({\n        url: `${baseURL}stalls/${stallID}/`,\n        method: 'DELETE',\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Deleted',\n                message: 'Successfully deleted stall.'\n            });\n            refreshStalls();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                message: 'Could not delete stall.'\n            })\n        },\n    })\n}\n\n\n//MARK: - Products\nfunction setUpAddProductModal() {\n    $('#add-tiered-product-card').hide();\n\n    $('#add-singular-product-tab').click(() => {\n        $('#add-tiered-product-card').hide();\n        $('#add-singular-product-card').show();\n    });\n\n    $('#add-tiered-product-tab').click(() => {\n        $('#add-singular-product-card').hide();\n        $('#add-tiered-product-card').show();\n    });\n\n    $('#add-tier-button').click(() => {\n        const clone = $('#tier-row-clone').clone();\n        clone.removeAttr('id');\n        clone.appendTo($('#tiers-set'));\n\n        $('#add-tiered-product-button').attr('disabled', true);\n\n        const deleteButton = $(clone.find('.tier-row-remove')[0]);\n        deleteButton.click(() => {\n            clone.remove();\n            recalculateValidator();\n        });\n\n        recalculateValidator();\n    });\n\n    function recalculateValidator() {\n        const inputs = $('#add-tiered-product-card').find('.text-input');\n\n        //Remove old validator\n        inputs.each((index, item) => {\n            $(item).off('input');\n        });\n\n        addValidation({\n            inputs: inputs,\n            button: $('#add-tiered-product-button')\n        });\n    }\n\n}\n\nfunction displayUploadingToast() {\n    const id = randomString();\n    iziToast.info({\n        title: 'Uploading image...',\n        id: id,\n        timeout: false\n    });\n\n    return id;\n}\n\nfunction hideUploadingToast(id) {\n    iziToast.hide({}, document.getElementById(id));\n}\n\nfunction submitAddProduct(product, stallID) {\n    $.ajax({\n        url: `${baseURL}stalls/${stallID}/products/`,\n        method: 'POST',\n        data: product,\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Added',\n                message: 'Successfully added product'\n            });\n            refreshProducts();\n        },\n        error: response => {\n            console.log(response.responseText);\n            iziToast.error({\n                title: 'Error',\n                message: 'Unable to add product'\n            })\n        }\n    });\n}\n\nfunction submitModifyProduct(product, productID) {\n    $.ajax({\n        url: `${baseURL}products/${productID}/`,\n        method: 'PATCH',\n        data: product,\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Modified',\n                message: 'Successfully modified product'\n            });\n            refreshProducts();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                message: 'Unable to modify product'\n            });\n        }\n    })\n}\n\nfunction uploadImage(data) {\n    const image = data.image;\n    const form = new FormData();\n    form.append('image', image);\n\n    const uploadToastID = displayUploadingToast();\n    $.post({\n        url: 'https://api.imgur.com/3/image',\n        async: true,\n        data: form,\n        contentType: false,\n        processData: false,\n        success: response => {\n            hideUploadingToast(uploadToastID);\n            iziToast.success({\n                title: 'Uploaded',\n                message: 'Image has been uploaded.'\n            });\n            data.success(response);\n        },\n        error: response => {\n            hideUploadingToast(uploadToastID);\n            iziToast.warning({\n                title: 'Error',\n                message: 'Unable to upload photo. Using default photo instead.'\n            });\n            data.error(response);\n        },\n        beforeSend: xhr => {\n            xhr.setRequestHeader('Authorization', 'Client-ID 715b55f24db9cd2')\n        }\n    });\n\n}\n\nfunction onAddSingularProductButtonClick() {\n    const name = $('#add-product-name-input').val();\n    const imageInput = $('#add-product-image-input')[0].files;\n    const stallID = $('#add-product-stall-id').val();\n\n    let product = {\n        name: name,\n        description: $('#add-product-description-input').val(),\n        tiers: [{\n            name: name,\n            price: $('#add-product-price-input').val(),\n        }]\n    };\n\n    if (imageInput.length) {\n        const image = imageInput[0];\n        uploadImage({\n            image: image,\n            success: response => {\n                product.image = response.data.link;\n                submitAddProduct(product, stallID)\n            },\n            error: response => {\n                console.log(response);\n                submitAddProduct(product, stallID);\n            }\n        })\n    } else {\n        submitAddProduct(product, stallID);\n    }\n}\n\nfunction onModifyProductButtonClick() {\n    const imageInput = $('#add-product-image-input')[0].files;\n    const productID = $('#modify-product-id').val();\n\n    let product = {\n        name: $('#modify-product-name-input').val(),\n        price: $('#modify-product-price-input').val(),\n        description: $('#modify-product-description-input').val()\n    };\n\n    if (imageInput.length) {\n        const image = imageInput[0];\n        uploadImage({\n            image: image,\n            success: response => {\n                product.image = response.data.link;\n                submitModifyProduct(product, productID);\n            },\n            error: response => {\n                console.log(response);\n                submitModifyProduct(product, productID);\n            }\n        })\n    } else {\n        submitModifyProduct(product, productID);\n    }\n}\n\nfunction onDeleteProductButtonClick() {\n    const productID = $('#delete-product-id').val();\n    $.ajax({\n        url: `${baseURL}products/${productID}/`,\n        method: 'DELETE',\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Deleted',\n                message: 'Successfully deleted product.'\n            });\n            refreshProducts();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                message: 'Could not delete product.'\n            })\n        }\n    })\n}\n\n\n//MARK: - Stock Inventory\nfunction onRestockButtonClick() {\n    const productID = $('#restock-product-id').val();\n    const quantity = $('#restock-quantity').val();\n    const isAdd = $('#restock-add').is(':checked');\n\n    $.ajax({\n        url: `${baseURL}products/${productID}/restock/`,\n        method: 'POST',\n        data: {\n            quantity: quantity,\n            add: isAdd\n        },\n        beforeSend: authorizeXHR,\n        success: () => {\n            iziToast.success({\n                title: 'Restocked',\n                message: 'Successfully restocked product'\n            });\n            refreshStockInventory();\n        },\n        error: response => {\n            console.log(response);\n            iziToast.error({\n                title: 'Error',\n                message: 'Unable to restock product'\n            });\n        }\n    })\n}\n\n//MARK: - XHR Authorization\nfunction authorizeXHR(xhr) {\n    xhr.setRequestHeader(\"Authorization\", \"Token \" + localStorage.token)\n}\n\n//MARK: - Random String Generator\nfunction randomString() {\n    // Random string with very little collision possibility\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    )\n}\n"]}