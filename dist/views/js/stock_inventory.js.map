{"version":3,"sources":["../../../views/js/stock_inventory.js"],"names":["fetchStocks","completionHandler","client","query","then","StockInventory","props","state","products","setState","result","loadingState","length","noProducts","render","Component","StockInventoryHead","StockTable","rows","map","product","index","StockRow","rowClass","quantity","name","stall"],"mappings":"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","file":"stock_inventory.js","sourcesContent":["import React from 'react';\n\n//Fetch data\nfunction fetchStocks(completionHandler) {\n    client.query(`\n    {\n        products {\n            id\n            name\n            quantity\n            stall {\n                name\n            }\n        }\n    }\n    `).then(completionHandler);\n}\n\n//React\nclass StockInventory extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            products: null\n        };\n\n        fetchStocks(result => {\n            this.setState({\n                products: result.products\n            });\n        });\n    }\n\n    static noProducts() {\n        render(\n            <div className=\"container d-flex flex-column justify-content-center align-items-center h-100\">\n                <h3>There are no products yet.</h3>\n                <p className=\"text-faded\">When products are added, the stock count can be seen here.</p>\n            </div>\n        )\n    }\n\n    static loadingState() {\n        return (\n            <div className=\"container d-flex flex-column justify-content-center align-items-center h-100\">\n                <h3>Loading...</h3>\n            </div>\n        );\n    }\n\n    render() {\n        if (this.state.products === null) {\n            return StockInventory.loadingState();\n        }\n\n        if (this.state.products.length === 0) {\n            return StockInventory.noProducts();\n        }\n\n        return (\n            <div id=\"stock-inventory\"\n                 className=\"container-fluid m-0 p-0 h-100 w-100\">\n                <StockInventoryHead/>\n                <StockTable products={this.state.products}/>\n            </div>\n        )\n    }\n}\n\nclass StockInventoryHead extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div id=\"stock-inventory-head\"\n                 className=\"container-fluid d-flex flex-row bg-light\">\n                <div className=\"mr-auto pt-5 row pl-3\">\n                    <h4 className=\"mr-3\">Stock Inventory</h4>\n                    <div>\n                        <button className=\"btn btn-sm btn-outline-primary\">Refresh data</button>\n                    </div>\n                </div>\n                <div id=\"stock-filter\"\n                     className=\"row ml-auto mt-auto mb-2\">\n                    <div className=\"col-auto mt-auto\">\n                        <div className=\"input-group mb-2 mb-sm-0\">\n                            <small className=\"text-muted mt-auto mb-2 mr-3 d-block\">Quantity filters</small>\n                            <div className=\"input-group-addon\">Less than</div>\n                            <input className=\"form-control\"\n                                   id=\"less-than-filter\"\n                                   placeholder=\"No filter\"/>\n                        </div>\n                    </div>\n                    <div className=\"col-auto mt-auto\">\n                        <div className=\"input-group mb-2 mb-sm-0\">\n                            <div className=\"input-group-addon\">Greater than</div>\n                            <input className=\"form-control\"\n                                   id=\"greater-than-filter\"\n                                   placeholder=\"No filter\"/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass StockTable extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n\n        const rows = this.props.products.map((product, index) => {\n            return <StockRow product={product}\n                             key={index}/>\n        });\n\n        return (\n            <div id=\"stocks-table\">\n                <table className=\"table\">\n                    <thead className=\"bg-light\">\n                    <tr>\n                        <th>Product Name</th>\n                        <th>Stall</th>\n                        <th>Quantity</th>\n                    </tr>\n                    <tbody>\n                    {rows}\n                    </tbody>\n                    </thead>\n                </table>\n            </div>\n        );\n    }\n}\n\nclass StockRow extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    static rowClass(quantity) {\n        if (quantity === 0) {\n            return \"table-danger\"\n        }\n\n        if (quantity <= 20) {\n            return \"table-warning\";\n        }\n\n        return \"\";\n    }\n\n    render() {\n        return (\n            <tr className={StockRow.rowClass(this.props.product.quantity)}>\n                <td>{this.props.product.name}</td>\n                <td>{this.props.product.stall.name}</td>\n                <td>{this.props.product.quantity}</td>\n            </tr>\n        );\n    }\n}\n\nexport default StockInventory;"]}